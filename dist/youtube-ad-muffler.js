(()=>{"use strict";var e={882:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.waitForElement=void 0,t.waitForElement=function(e,t=1e4){return Promise.race([new Promise((t=>{const n=document.querySelector(e);if(n)return t(n);const i=new MutationObserver((n=>{const o=document.querySelector(e);o&&(i.disconnect(),t(o))}));i.observe(document.body,{childList:!0,subtree:!0})})),new Promise((e=>setTimeout(e,t,null)))])}},238:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,d){function a(e){try{r(i.next(e))}catch(e){d(e)}}function s(e){try{r(i.throw(e))}catch(e){d(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}r((i=i.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const d=o(n(581));!function(){i(this,void 0,void 0,(function*(){const e=new d.default;let t=null,n=!1;function o(){var e;return"0px"===(null===(e=null==t?void 0:t.querySelector(".ytp-volume-slider-handle"))||void 0===e?void 0:e.style.left)}function a(){var e;null===(e=null==t?void 0:t.querySelector(".ytp-mute-button"))||void 0===e||e.click()}function s(){if(!t)return;o()||a();const e=t.querySelector("video");e&&(e.style.filter="grayscale(1) brightness(0.2)",e.playbackRate=16),n=!0}e.onOpenedVideoPage((()=>i(this,void 0,void 0,(function*(){t=e.getYoutubePlayer()})))),e.onClosedVideoPage((()=>i(this,void 0,void 0,(function*(){t=null})))),e.onAdStarted((()=>{s()})),e.onAdPlaying((()=>{n||s()})),e.onNextAd((()=>{n=!1,s()})),e.onAdEnded((()=>{!function(){if(!t)return;o()&&a();const e=t.querySelector("video");e&&(e.style.filter="none",e.playbackRate=1),n=!1}()})),e.startListener()}))}()},581:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,d){function a(e){try{r(i.next(e))}catch(e){d(e)}}function s(e){try{r(i.throw(e))}catch(e){d(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}r((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(882);var d;!function(e){e.OpenedVideoPage="yt-ad-muffler-video-page-open",e.NextVideoPage="yt-ad-muffler-video-page-new",e.ClosedVideoPage="yt-ad-muffler-video-page-close",e.AdStart="yt-ad-muffler-ad-start",e.AdPlaying="yt-ad-muffler-ad-playing",e.AdNext="yt-ad-muffler-ad-next",e.AdEnd="yt-ad-muffler-ad-end"}(d||(d={})),t.default=class{constructor(){this.location=null,this.videoId=null,this.ytdPlayer=null,this.adId=null,this.isRunningCheck=!1}startListener(){this.setupPageChangeListeners(),this.checkForPageChanges()}setupPageChangeListeners(){let e=[];const t=()=>{document.querySelectorAll("video").forEach((t=>{e.includes(t)||(e.push(t),t.addEventListener("canplay",(()=>this.checkForPageChanges())),t.addEventListener("canplaythrough",(()=>this.checkForPageChanges())),t.addEventListener("playing",(()=>this.checkForPageChanges())))}))};t(),document.addEventListener("yt-navigate-start",(()=>{t(),this.checkForPageChanges()})),document.addEventListener("yt-navigate-finish",(()=>{t(),this.checkForPageChanges()}))}getYoutubeVideoId(){return new URL(window.location.href).searchParams.get("v")}checkForPageChanges(){var e,t;return i(this,void 0,void 0,(function*(){if(this.isRunningCheck)return;this.isRunningCheck=!0;const n=window.location.href;if(n!==this.location){const e=this.getYoutubeVideoId();e!==this.videoId&&(null===this.videoId?(this.ytdPlayer=yield(0,o.waitForElement)("#ytd-player:has(video)"),this.dispatchYoutubeEvent(d.OpenedVideoPage)):null===e?(this.ytdPlayer=null,this.dispatchYoutubeEvent(d.ClosedVideoPage)):this.dispatchYoutubeEvent(d.NextVideoPage),this.videoId=e),this.location=n}if(!this.videoId)return void(this.isRunningCheck=!1);if(!this.ytdPlayer&&(this.ytdPlayer=yield(0,o.waitForElement)("#ytd-player:has(video)"),!this.ytdPlayer))return void(this.isRunningCheck=!1);const i=null!==(t=null===(e=this.ytdPlayer.querySelector(".ytp-ad-visit-advertiser-button"))||void 0===e?void 0:e.getAttribute("aria-label"))&&void 0!==t?t:null;i!==this.adId&&(null===this.adId?this.dispatchYoutubeEvent(d.AdStart):null===i?this.dispatchYoutubeEvent(d.AdEnd):this.dispatchYoutubeEvent(d.AdNext),this.adId=i),this.adId&&this.dispatchYoutubeEvent(d.AdPlaying),this.isRunningCheck=!1}))}dispatchYoutubeEvent(e){document.dispatchEvent(new CustomEvent(e))}addYoutubeEventListener(e,t){document.addEventListener(e,(()=>t()))}getYoutubePlayer(){return this.ytdPlayer}onOpenedVideoPage(e){this.addYoutubeEventListener(d.OpenedVideoPage,(()=>e()))}onNextVideoPage(e){this.addYoutubeEventListener(d.NextVideoPage,(()=>e()))}onClosedVideoPage(e){this.addYoutubeEventListener(d.ClosedVideoPage,(()=>e()))}onAdStarted(e){this.addYoutubeEventListener(d.AdStart,(()=>e()))}onAdPlaying(e){this.addYoutubeEventListener(d.AdPlaying,(()=>e()))}onAdEnded(e){this.addYoutubeEventListener(d.AdEnd,(()=>e()))}onNextAd(e){this.addYoutubeEventListener(d.AdNext,(()=>e()))}}}},t={};!function n(i){var o=t[i];if(void 0!==o)return o.exports;var d=t[i]={exports:{}};return e[i].call(d.exports,d,d.exports,n),d.exports}(238)})();